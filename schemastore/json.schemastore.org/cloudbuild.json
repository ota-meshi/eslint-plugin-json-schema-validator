{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://json.schemastore.org/cloudbuild","title":"Google Cloud Build build config file","type":"object","properties":{"steps":{"type":"array","items":{"$ref":"#/definitions/BuildStep"}},"logsBucket":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"substitutions":{"additionalProperties":{"type":"string"},"type":"object"},"images":{"type":"array","items":{"type":"string"}},"options":{"$ref":"#/definitions/BuildOptions"},"source":{"$ref":"#/definitions/Source"},"artifacts":{"$ref":"#/definitions/Artifacts"},"timeout":{"format":"google-duration","type":"string","pattern":"^\\d+(\\.\\d{0,9})?s$","default":"600s","examples":["3.5s"]},"secrets":{"type":"array","items":{"$ref":"#/definitions/Secret"}}},"required":["steps"],"definitions":{"BuildStep":{"type":"object","properties":{"name":{"type":"string"},"waitFor":{"type":"array","items":{"type":"string"}},"env":{"type":"array","items":{"type":"string"}},"entrypoint":{"type":"string"},"volumes":{"type":"array","items":{"$ref":"#/definitions/Volume"}},"args":{"type":"array","items":{"type":"string"}},"timeout":{"type":"string","format":"google-duration","pattern":"^\\d+(\\.\\d{0,9})?s$","default":"600s","examples":["3.5s"]},"id":{"type":"string"},"secretEnv":{"type":"array","items":{"type":"string"}},"dir":{"type":"string"}}},"BuildOptions":{"type":"object","properties":{"machineType":{"enum":["UNSPECIFIED","N1_HIGHCPU_8","N1_HIGHCPU_32","E2_HIGHCPU_8","E2_HIGHCPU_32"],"type":"string","enumDescriptions":["Standard machine type.","Highcpu machine with 8 CPUs.","Highcpu machine with 32 CPUs.","Highcpu e2 machine with 8 CPUs.","Highcpu e2 machine with 32 CPUs."]},"volumes":{"type":"array","items":{"$ref":"#/definitions/Volume"}},"logStreamingOption":{"enum":["STREAM_DEFAULT","STREAM_ON","STREAM_OFF"],"type":"string","enumDescriptions":["Service may automatically determine build log streaming behavior.","Build logs should be streamed to Google Cloud Storage.","Build logs should not be streamed to Google Cloud Storage; they will be\nwritten when the build is completed."]},"workerPool":{"type":"string"},"env":{"type":"array","items":{"type":"string"}},"logging":{"enum":["LOGGING_UNSPECIFIED","LEGACY","GCS_ONLY","CLOUD_LOGGING_ONLY","NONE"],"type":"string","enumDescriptions":["The service determines the logging mode. The default is `LEGACY`. Do not\nrely on the default logging behavior as it may change in the future.","Stackdriver logging and Cloud Storage logging are enabled.","Only Cloud Storage logging is enabled.","Only Cloud Logging is enabled. Note that logs for both the Cloud Console UI and Cloud SDK are based on Cloud Storage logs, so neither will provide logs if this option is chosen.","Turn off all logging. No build logs will be captured."]},"requestedVerifyOption":{"type":"string","enumDescriptions":["Not a verifiable build. (default)","Verified build."],"enum":["NOT_VERIFIED","VERIFIED"]},"substitutionOption":{"enum":["MUST_MATCH","ALLOW_LOOSE"],"type":"string","enumDescriptions":["Fails the build if error in substitutions checks, like missing\na substitution in the template or in the map.","Do not fail the build if error in substitutions checks."]},"diskSizeGb":{"format":"int64","type":"string"},"secretEnv":{"type":"array","items":{"type":"string"}},"sourceProvenanceHash":{"enumDescriptions":["No hash requested.","Use a sha256 hash.","Use a md5 hash."],"type":"array","items":{"enum":["NONE","SHA256","MD5"],"type":"string"}}}},"Secret":{"type":"object","properties":{"kmsKeyName":{"type":"string"},"secretEnv":{"type":"object","additionalProperties":{"format":"byte","type":"string"}}}},"Source":{"type":"object","properties":{"storageSource":{"$ref":"#/definitions/StorageSource"},"repoSource":{"$ref":"#/definitions/RepoSource"}}},"StorageSource":{"type":"object","properties":{"generation":{"type":"string","format":"int64"},"bucket":{"type":"string"},"object":{"type":"string"}},"$id":"StorageSource"},"RepoSource":{"type":"object","properties":{"tagName":{"type":"string"},"projectId":{"type":"string"},"repoName":{"type":"string"},"commitSha":{"type":"string"},"dir":{"type":"string"},"branchName":{"type":"string"}}},"Artifacts":{"type":"object","properties":{"objects":{"$ref":"#/definitions/ArtifactObjects"},"images":{"type":"array","items":{"type":"string"}}}},"ArtifactObjects":{"type":"object","properties":{"location":{"type":"string"},"paths":{"type":"array","items":{"type":"string"}}}},"Volume":{"type":"object","properties":{"name":{"type":"string"},"path":{"type":"string"}}}}}