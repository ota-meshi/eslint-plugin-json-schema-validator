{"title":"JSON schema for AppVeyor CI configuration files","$schema":"http://json-schema.org/draft-07/schema","definitions":{"possiblySecretString":{"anyOf":[{"type":"string"},{"type":"number"},{"type":"object","additionalProperties":false,"properties":{"secure":{"type":"string"}}}]},"commitFilter":{"type":"object","additionalProperties":false,"properties":{"message":{"type":"string","format":"regex"},"author":{"anyOf":[{"type":"string","format":"regex"},{"type":"string"}]},"files":{"type":"array","items":{"type":"string"}}}},"command":{"oneOf":[{"type":"string"},{"type":"object","additionalProperties":false,"properties":{"ps":{"type":"string"}}},{"type":"object","additionalProperties":false,"properties":{"pwsh":{"type":"string"}}},{"type":"object","additionalProperties":false,"properties":{"cmd":{"type":"string"}}},{"type":"object","additionalProperties":false,"properties":{"sh":{"type":"string"}}}]},"envVarHash":{"type":"object","additionalProperties":{"$ref":"#/definitions/possiblySecretString"}},"platform":{"enum":["x86","x64","ARM","ARM64","Win32","Any CPU"]},"configuration":{"type":"string"},"imageName":{"enum":["macOS","macOS-Mojave","Previous macOS","Previous macOS-Mojave","Ubuntu","Ubuntu1604","Ubuntu1804","Ubuntu2004","Previous Ubuntu","Previous Ubuntu1604","Previous Ubuntu1804","Previous Ubuntu2004","Visual Studio 2013","Visual Studio 2015","Visual Studio 2017","Visual Studio 2019","Visual Studio 2017 Preview","Visual Studio 2019 Preview","Previous Visual Studio 2013","Previous Visual Studio 2015","Previous Visual Studio 2017","zhaw18","WMF 5"]},"image":{"oneOf":[{"type":"array","items":{"$ref":"#/definitions/imageName"}},{"$ref":"#/definitions/imageName"}]},"jobScalars":{"type":"object","properties":{"image":{"$ref":"#/definitions/image"},"platform":{"oneOf":[{"$ref":"#/definitions/platform"},{"type":"array","items":{"$ref":"#/definitions/platform"}}]},"configuration":{"oneOf":[{"$ref":"#/definitions/configuration"},{"type":"array","items":{"$ref":"#/definitions/configuration"}}]}},"allOf":[{"not":{"required":["skip_tags"]}},{"not":{"required":["skip_commits"]}},{"not":{"required":["skip_branch_with_pr"]}},{"not":{"required":["skip_non_tags"]}}]},"job":{"properties":{"version":{"type":"string"},"branches":{"type":"object","additionalProperties":false,"properties":{"only":{"type":"array","items":{"type":"string"}},"except":{"type":"array","items":{"type":"string"}}}},"skip_tags":{"type":"boolean"},"skip_non_tags":{"type":"boolean"},"skip_commits":{"$ref":"#/definitions/commitFilter"},"only_commits":{"$ref":"#/definitions/commitFilter"},"skip_branch_with_pr":{"type":"boolean"},"max_jobs":{"type":"integer"},"notifications":{"type":"array","items":{"type":"object"}},"image":{"$ref":"#/definitions/image"},"init":{"type":"array","items":{"$ref":"#/definitions/command"}},"clone_folder":{"type":"string"},"shallow_clone":{"type":"boolean","default":false},"clone_depth":{"type":"integer"},"hosts":{"type":"object","additionalProperties":{"type":"string","anyOf":[{"format":"ipv4"},{"format":"ipv6"}]}},"environment":{"anyOf":[{"type":"object","properties":{"global":{"$ref":"#/definitions/envVarHash"},"matrix":{"type":"array","items":{"$ref":"#/definitions/envVarHash"}}}},{"$ref":"#/definitions/envVarHash"}]},"matrix":{"type":"object","additionalProperties":false,"properties":{"fast_finish":{"type":"boolean"},"allow_failures":{"type":"array","items":{"$ref":"#/definitions/jobScalars"}},"exclude":{"type":"array","items":{"$ref":"#/definitions/job"}}}},"cache":{"type":"array","items":{"type":"string"}},"services":{"type":"array","items":{"enum":["docker","iis","mongodb","msmq","mssql2008r2sp2","mssql2008r2sp2rs","mssql2012sp1","mssql2012sp1rs","mssql2014","mssql2014rs","mysql","postgresql","postgresql93","postgresql94","postgresql95","postgresql96","postgresql10"]}},"install":{"type":"array","items":{"$ref":"#/definitions/command"}},"assembly_info":{"type":"object","additionalProperties":false,"properties":{"patch":{"type":"boolean"},"file":{"type":"string"},"assembly_version":{"type":"string"},"assembly_file_version":{"type":"string"},"assembly_informational_version":{"type":"string"}}},"nuget":{"type":"object","properties":{"account_feed":{"type":"boolean"},"project_feed":{"type":"boolean"},"disable_publish_on_pr":{"type":"boolean"}}},"platform":{"oneOf":[{"$ref":"#/definitions/platform"},{"type":"array","items":{"$ref":"#/definitions/platform"}}]},"configuration":{"oneOf":[{"$ref":"#/definitions/configuration"},{"type":"array","items":{"$ref":"#/definitions/configuration"}}]},"build":{"oneOf":[{"const":false},{"type":"object","additionalProperties":false,"properties":{"parallel":{"type":"boolean"},"project":{"type":"string"},"publish_wap":{"type":"boolean"},"publish_wap_xcopy":{"type":"boolean"},"publish_azure":{"type":"boolean"},"publish_nuget":{"type":"boolean"},"publish_nuget_symbols":{"type":"boolean"},"include_nuget_references":{"type":"boolean"},"verbosity":{"enum":["quiet","minimal","normal","detailed"]}}}]},"before_build":{"type":"array","items":{"$ref":"#/definitions/command"}},"before_package":{"type":"array","items":{"$ref":"#/definitions/command"}},"after_build":{"type":"array","items":{"$ref":"#/definitions/command"}},"build_script":{"type":"array","items":{"$ref":"#/definitions/command"}},"before_test":{"type":"array","items":{"$ref":"#/definitions/command"}},"test":{"oneOf":[{"type":"boolean","const":false},{"type":"object","additionalProperties":false,"properties":{"assemblies":{"type":"object","additionalProperties":false,"properties":{"only":{"type":"array","items":{"type":"string"}},"except":{"type":"array","items":{"type":"string"}}}},"categories":{"oneOf":[{"type":"object","additionalProperties":false,"properties":{"only":{"type":"array","items":{"type":"string"}},"except":{"type":"array","items":{"type":"string"}}}},{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}}]}}}]},"test_script":{"type":"array","items":{"$ref":"#/definitions/command"}},"after_test":{"type":"array","items":{"$ref":"#/definitions/command"}},"artifacts":{"type":"array","items":{"type":"object","additionalProperties":false,"properties":{"path":{"type":"string"},"name":{"type":"string"}},"required":["path"]}},"before_deploy":{"type":"array","items":{"$ref":"#/definitions/command"}},"deploy":{"oneOf":[{"const":false},{"type":"array","items":{"type":"object"}}]},"deploy_script":{"type":"array","items":{"$ref":"#/definitions/command"}},"after_deploy":{"type":"array","items":{"$ref":"#/definitions/command"}},"on_success":{"type":"array","items":{"$ref":"#/definitions/command"}},"on_failure":{"type":"array","items":{"$ref":"#/definitions/command"}},"on_finish":{"type":"array","items":{"$ref":"#/definitions/command"}}}}},"allOf":[{"$ref":"#/definitions/job"}]}