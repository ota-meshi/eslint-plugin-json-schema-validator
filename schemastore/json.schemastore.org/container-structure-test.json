{"$schema":"http://json-schema.org/draft-07/schema#","title":"Container Structure Tests","$comment":"https://github.com/GoogleContainerTools/container-structure-test","type":"object","additionalProperties":false,"required":["schemaVersion"],"properties":{"schemaVersion":{"type":"string","default":"2.0.0"},"commandTests":{"type":"array","items":{"type":"object","required":["name","command"],"properties":{"name":{"type":"string"},"setup":{"type":"array","items":{"type":"array","items":{"type":"string"}}},"teardown":{"type":"array","items":{"type":"array","items":{"type":"string"}}},"envVars":{"type":"array","items":{"$ref":"#/definitions/envVar"}},"command":{"type":"string"},"args":{"type":"array","items":{"type":"string"}},"expectedOutput":{"type":"array","minItems":1,"items":{"type":"string"}},"excludedOutput":{"type":"array","minItems":1,"items":{"type":"string"}},"expectedError":{"type":"array","minItems":1,"items":{"type":"string"}},"excludedError":{"type":"array","minItems":1,"items":{"type":"string"}},"exitCode":{"type":"integer"}}}},"fileExistenceTests":{"type":"array","items":{"type":"object","required":["name","path","shouldExist"],"properties":{"name":{"type":"string"},"path":{"type":"string","default":"/"},"shouldExist":{"type":"boolean","default":true},"permissions":{"type":"string"},"uid":{"type":"number"},"gid":{"type":"number"},"isExecutableBy":{"type":"string","enum":["owner","group","any","other"]}}}},"fileContentTests":{"type":"array","items":{"type":"object","required":["name","path"],"properties":{"name":{"type":"string"},"path":{"type":"string"},"expectedContents":{"type":"array","minItems":1,"items":{"type":"string"}},"excludedContents":{"type":"array","minItems":1,"items":{"type":"string"}}}}},"licenseTests":{"type":"array","items":{"type":"object","required":["debian"],"properties":{"debian":{"type":"boolean","default":true},"files":{"type":"array","minItems":1,"items":{"type":"string"}}}}},"metadataTest":{"type":"object","properties":{"env":{"type":"array","minItems":1,"items":{"$ref":"#/definitions/envVar"}},"labels":{"type":"array","minItems":1,"items":{"$ref":"#/definitions/label"}},"entrypoint":{"type":"array","minItems":1,"items":{"type":"string"}},"cmd":{"type":"array","minItems":1,"items":{"type":"string"}},"exposedPorts":{"type":"array","minItems":1,"items":{"type":"string"}},"unexposedPorts":{"type":"array","minItems":1,"items":{"type":"string"}},"volumes":{"type":"array","minItems":1,"items":{"type":"string"}},"unmountedVolumes":{"type":"array","minItems":1,"items":{"type":"string"}},"workdir":{"type":"string"}}},"globalEnvVars":{"type":"array","minItems":1,"items":{"$ref":"#/definitions/envVar"}}},"definitions":{"envVar":{"$id":"#/definitions/envVar","type":"object","additionalProperties":false,"required":["key","value"],"properties":{"key":{"type":"string"},"value":{"type":"string"}}},"label":{"$id":"#/definitions/label","type":"object","additionalProperties":false,"required":["key","value"],"properties":{"key":{"type":"string"},"value":{"type":"string"},"isRegex":{"type":"boolean"}}}}}